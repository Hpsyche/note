## 实现一

首先定义一个任务类

```java
package com.capol.training.newemployee.server.job;

import org.quartz.JobExecutionContext;
import org.quartz.JobExecutionException;
import org.springframework.scheduling.quartz.QuartzJobBean;

/**
 * @author fuzihao
 * @date 2019/8/16 10:14
 * 与QuartzConfiguration配合使用
 */
public class EntryUpdateQuartz extends QuartzJobBean {
    @Override
    protected void executeInternal(JobExecutionContext jobExecutionContext) throws JobExecutionException {
        System.out.println("定时任务："+666);
    }
}
```

设置触发器及任务细节等

```java
package com.capol.training.newemployee.server.helpers.config;

import com.capol.training.newemployee.server.job.EntryUpdateQuartz;
import org.quartz.*;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

/**
 * @author fuzihao
 * @date 2019/8/16 10:15
 * 通过job+trigger SimpleScheduleBuilder bean对象来设置定时任务
 */
@Configuration
public class QuartzConfiguration {
    @Bean
    public JobDetail jobDetail(){
        return JobBuilder.newJob(EntryUpdateQuartz.class)
                .withIdentity("entryUpdateJob")
                .storeDurably().build();
    }
    @Bean
    public Trigger trigger(){
        SimpleScheduleBuilder scheduleBuilder=SimpleScheduleBuilder.simpleSchedule()
                .withIntervalInMinutes(1).repeatForever();
        return TriggerBuilder.newTrigger().forJob(
                jobDetail()).withIdentity("entryUpdateTrigger")
                .withSchedule(scheduleBuilder).build();
    }
}
```

以此即可实现每分钟触发一次

## 实现二

实现二较为简单，直接通过Cron表达式来实现

```java
package com.capol.training.newemployee.server.helpers.config;

import com.capol.cache.service.IRedisService;
import com.capol.training.newemployee.common.helpers.constant.TrainingConstant;
import lombok.extern.slf4j.Slf4j;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Configuration;
import org.springframework.scheduling.annotation.EnableScheduling;
import org.springframework.scheduling.annotation.Scheduled;

/**
 * @author fuzihao
 * @date 2019/8/16 10:23
 * 通过cron表达式来配置定时任务
 */
@Slf4j
@EnableScheduling
@Configuration
public class QuartzAnnoConfiguration {
    @Autowired
    private IRedisService redisService;

    /**
     * 定时任务，每30分钟清空一次redis公告缓存
     */
    @Scheduled(cron = "0 */30 * * * ?")
    public void clearEntryNotice(){
        redisService.delete(TrainingConstant.REDIS_HKEY_TRAIN_ENTRYNOTICE);
        redisService.delete(TrainingConstant.REDIS_HKEY_TRAIN_ENTRYNOTICE_TOTAL);
        log.info("定时触发清空redis");
        System.out.println("定时触发清空redis，删除完成");
    }
}
```

