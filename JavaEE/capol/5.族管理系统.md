#### 1.专业名词

**Revit**：Autodesk发布的三维设计软件。

**构件/实例**：Revit绘制三维模型中的最小单位。约等同一个实体。如一扇窗、一张桌子，一根柱子。

**族**：Revit绘制三维模型时，用于快速创建构件的模板。通过载入族输入参数快速生成实例。

#### 2.目的

设计师在Revit中进行设计时，选取载入合格的族，通过配置参数快速生成实例。但是传统的族管理有很大的问题，族本身的不统一、不规范、族库不全、检索困难，导致设计效率低下，质量不高。

族库管理系统就是来解决这些问题的。

#### 3.范围

族库管理，主要包括族制作流程标准化，族库快速检索，在此基础上打造一个比较完整，可持续发展的族库数据中心。



族应用模块主要为支持Revit布置插件的族使用，提供相应的数据接口，目前第一期版本提供如下6个接口：

Ø  登录接口：支持华阳员工（有域账号）进行自动登录和账号密码登录两种方式，登录成功后返回登录用户的基本信息；

Ø  获取专业下第一级分类信息（id、分类名称），人员所属专业参考人员专业管理模块的说明；

Ø  获取第一级分类下的分类、族、族类型的树形结构数据，需包含每个节点的名称、id、节点类型（三种）；

Ø  根据族名称获取族信息（族文件下载路径）和族类型参数（类型名称、key-value……）；

Ø  文件下载接口（根据文件下载路径）；

Ø  命令被点评信息记录接口（命名名称+好评/差评+点评人+点评时间）





| **名称**                | **说明**                                                     | **类型** |
| ----------------------- | ------------------------------------------------------------ | -------- |
| **username**    *必填*  | 域帐号                                                       | string   |
| **password**    *必填*  | 域密码(明文)，请使用AES加密算法对明文的password进行两次加密    AES KEY的生成规则timestamp+username（后三位） | string   |
| **timestamp**    *必填* | 时间戳                                                       | string   |

2.1.2. 密码登陆

POST /auth/ltpa/revitPwdLogin

说明

帐号密码登陆

参数

| **类型** | **名称**            | **说明**  | **类型**                                  |
| -------- | ------------------- | --------- | ----------------------------------------- |
| **Body** | **param**    *必填* | **param** | [CapolAuthPwdDTO](#_3.4._CapolAuthPwdDTO) |

响应

| **HTTP****代码** | **说明**     | **类型**                                                     |
| ---------------- | ------------ | ------------------------------------------------------------ |
| **200**          | OK           | [ObjectResponse«AuthLoginVO»](file:///D:\new_work\copal_cloud_project\revit-master\revit-server\docs\asciidoc\html\all.html#_a236619f96fc116d7500a0414e4949db) |
| **201**          | Created      | 无内容                                                       |
| **401**          | Unauthorized | 无内容                                                       |
| **403**          | Forbidden    | 无内容                                                       |
| **404**          | Not   Found  | 无内容                                                       |

消耗

·         application/json

生成

·         入参数据参考

{

  " **username** ": "string",

  " **password** ": "string",

  " timestamp ": "string",  

" sgin ": "string"

}

 

·         出参数据参考

{

  "data": {

“token”:”string”

},

  "message": "string",

  "rel": true,

  "status": 0

}

 





