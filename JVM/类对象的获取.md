# 获取过程

Java中对象的访问流程如下：

* 定义的对象名称保存在Java栈的本地变量表；
* 通过本地变量表中的栈内存地址可以找到堆内存；
* 利用堆内存存的对象进行本地方法的调用

这个过程中的引用类型变量在java虚拟机规范里面只规定了一个指向对象的引用地址，并没有定义这个引用应该通过那种方式去定位、访问到java堆中的对象位置，因此不同的虚拟机实现的访问方式可能不同,主流的方式有两种：使用句柄和直接指针：

## 通过句柄访问

如果使用句柄访问的话，那么Java堆中将会划分出一块内存来作为句柄池，reference中存储的就是对象的句柄地址，而<font color=red>句柄中包含了对象实例数据与类型数据各自的具体地址信息</font>：

![](D:\Work\TyporaNotes\note\JVM\pict\通过句柄访问对象.jpg)

## 通过直接指针访问

如果使用直接指针访问（HotSpot虚拟机），那么Java堆对象的布局汇总就必须考虑如何放置访问类型数据的相关信息，而reference中存储的指针就是对象地址。

![](D:\Work\TyporaNotes\note\JVM\pict\通过直接指针访问对象.jpg)

这两种访问方式各有优势：

* 使用句柄来访问的最大好处就是reference中存储的是稳定的句柄地址，在对象被移动时只会改变句柄中的实例数据指针，而reference本身不需要修改

* 使用直接指针访问方式的最大好处就是速度快，它节省了一次指针定位的时间开销。