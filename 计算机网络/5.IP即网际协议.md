# IP（Internet Protocol）

IP相当于OSI参考模型中的第3层----网络层

网络层的主要功能是“实现终端节点之间的通信”，IP的主要作用就是**在复杂的网络环境中数据包发送给最终的目标地址**；

*<font color=red>数据链路层的主要作用是在互连同一种数据链路的节点之间进行包传递。而一旦跨越多种数据链路，就需要借助网络层，网络层可以跨越不同的数据链路，即使是在不同的数据链路上也能实现两端节点之前的数据包传输。</font>*

## 网络层和数据链路层的关系

数据链路层提供直连两个设备之间的通信，与之相比，作为网络层的IP则负责在没有直连的两个网络之间进行通信传输；

举例：某人要去旅行，需要先后乘坐飞机、火车等才能到达目的地，同时他也制作了一个详细行程表，此时则有：

行程表汇总每个”区间内“的行程就相当于通信网络上的数据链路；
而这个区间内的出发地点和目的地点就如同某一个数据链路的源地址和目标地址等首部信息；
整个全程的行程表的作用就相当于网络层。

即：计算机网络中需要数据链路层和网络层两个分层相互配合才能实现向最终目标地址的通信。

## IP属性面向无连接型

IP面向无连接，即在发包之前，不需要建立与对端目标地址之间的连接。上层如果遇到需要发送给IP的数据，该数据会立即被压缩成IP包发送出去；

（面向无连接的方式下可能会有很多冗杂的通信）那么为什么IP要采用面向无连接？

* 为了简化
* 为了提速

如果面向连接的话，每次通信之前都要事先建立连接，又会降低处理速度。需要有连接时，可以委托上一层提供此项服务。因此，IP为了实现简单化与高速化采用面向无连接的方式。

## TCP采用面向有连接型

为了提高可靠性，上一层的TCP采用面向有连接型；

如果说IP只负责将数据发给目标主机，那么TCP则复杂保证对端主机确实接受到了数据； 

## 两种广播

广播分为本地广播和直接广播

### 本地广播

在网络内的广播叫做本地广播。因此这个广播地址的IP包会被路由器屏蔽，所以不会到达网络号以外的其他链路上

### 直接广播

在不同网络之间的广播叫做直接广播。将数据转发给目标网络号IP（例192.168.1.0/24），从而使得192.168.1.1-192.168.1.254的主机都能收到这个包

## IP多播

多播用于将包发送给特定组内的所有主机。由于其直接使用IP协议，因此也不存在可靠传输。

路由器不转发广播的包，复制多播的包。

多播使用D类地址，如果从首位开始到第4位是“1110”，就可以认为是多播地址。

从224.0.0.0到239.255.255.255到时多播地址的可用范围；



