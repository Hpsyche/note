# 异常Throwable分类

## 1.Exception：程序可处理的异常

### 1.1 运行时异常（非检查异常）

大致包括：

NullPotinerException

ArrayindexOutOfBoundException

ArthmeticException

NumberFormatException

**对于这类异常，可以不处理，由虚拟机接管。**

出现异常后，系统会把异常一直往上层抛，一直遇到处理代码。如果没有处理块，到最上层，如果是多线层就由`Thread.run()`是抛出，如果是单线程就被`main()`抛出。抛出之后，如果是线程，这个线程也退出了；如果是主程序抛出的异常，那么这个程序也就退出了。

### 1.2 检查时异常（非运行时异常）

大致包括：

IOException

EOFException

FileNotFoundException

SQLException

**对于这类异常，JAVA编译器强制我们对进行catch**

## 2.Error：程序无法处理的异常（非检查异常）

大致包括：

OutOfMemoryError

StackOverflowError

![](D:\Work\TyporaNotes\note\JavaSE\pict\异常分类.png)

## Tips

* 不要推诿或延迟处理异常，就地解决最好，并且需要实实在在的进行处理，而不是只捕捉，不动作；
* 一个函数尽管抛出了多个异常，但是只有一个异常可被传播到调用端。最后被抛出的异常是唯一被调用端接收的异常，其他异常都会被吞没掩盖。故：<font color=red>如果调用端要知道造成失败的最初原因，程序之中就绝不能掩盖任何异常；</font>
* 不要在finally代码块中处理返回值；
* 按照我们程序员的惯性认知：当遇到return语句的时候，执行函数会立刻返回。但是，在Java语言中，如果存在finally就会有例外。除了return语句，try代码块中的break或continue语句也可能使控制权进入finally代码块；
* 请勿在try代码块中调用return、break或continue语句。万一无法避免，一定要确保finally的存在不会改变函数的返回值；
* 函数返回值有两种类型：值类型与对象引用。对于对象引用，要特别小心，如果在finally代码块中对函数返回的对象成员属性进行了修改，即使不在finally块中显式调用return语句，这个修改也会作用于返回值上；
* try-catch 代码段会产生额外的性能开销，所以尽可能的try小范围的代码；
* 勿将异常用于控制流；
* 如无必要，勿用异常。

##  NoClassDefFoundError 和 ClassNotFoundException 区别

NoClassDefFoundError是一个错误(Error)，而ClassNOtFoundException是一个异常，在Java中对于错误和异常的处理是不同的，我们可以从异常中恢复程序，但却不应该尝试从错误中恢复程序。

### ClassNotFoundException的产生原因

Java支持使用Class.forName方法来动态地加载类，任意一个类的类名如果被作为参数传递给这个方法都将导致该类被加载到JVM内存中，<font color=red>如果这个类在类路径中没有被找到，那么此时就会在运行时抛出ClassNotFoundException异常。</font>

### NoClassDefFoundError的产生原因

如果JVM或者ClassLoader实例尝试加载（可以通过正常的方法调用，也可能是使用new来创建新的对象）类的时候却找不到类的定义。要查找的类在编译的时候是存在的，运行的时候却找不到了。这个时候就会导致NoClassDefFoundError.

造成该问题的原因可能是打包过程漏掉了部分类，或者jar包出现损坏或者篡改。解决这个问题的办法是查找那些在开发期间存在于类路径下但在运行期间却不在类路径下的类。

举例可见https://blog.csdn.net/qq_27576335/article/details/77102385



## 有问必答

```java
public class MyTest {
    static Integer count=10;
    static Integer method(){
        try{
            return count++;
        }finally {
            return count--;
        }
    }
    public static void main(String[] args) {
        System.out.println(method());
    }
}
```

* 此代码的执行结果为？

  11。

